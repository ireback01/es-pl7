{% extends 'home/home.html' %}
{% block content %}
{% load static %}

<html>
    <head>
        <title>Edit Profile</title>
        <link rel="stylesheet" href="{% static 'user/profile/edit_profile.css' %}">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js"></script>
        <script>
            function readURL(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        $('#profile_pic')
                            .attr('src', e.target.result);
                    };
                    reader.readAsDataURL(input.files[0]);
                }
            }
        </script>
        <script>
            function onload() {
                /*var id_img = document.getElementById("id_image");
                id_img.setAttribute("onchange", readURL(id_img));*/

                let research_group_input = document.getElementById("id_research_group");
                research_group_input.placeholder="URL of Research Group";
                research_group_input.classList.add("lab_input");

                let first_name_input = document.getElementById("id_first_name");
                first_name_input.placeholder="First Name";
                first_name_input.classList.add("lab_input");

                let last_name_input = document.getElementById("id_last_name");
                last_name_input.placeholder="Last Name";
                last_name_input.classList.add("lab_input");

                let birth_date_input = document.getElementById("id_birth_date");
                birth_date_input.placeholder="Format: yyyy-mm-dd";
                birth_date_input.classList.add("lab_input");

                let about_me_input = document.getElementById("id_about_me");
                about_me_input.placeholder="Max Chars: 300";
                about_me_input.classList.add("lab_input");

                let linked_in_input = document.getElementById("id_linked_in");
                linked_in_input.placeholder="linkedIN URL";
                linked_in_input.classList.add("lab_input");

                let interests_input = document.getElementById("id_interests");
                interests_input.placeholder="Format: #example #example2";
                interests_input.classList.add("lab_input");

                let subreddits_input = document.getElementById("id_subreddits");
                subreddits_input.placeholder="Format: example example2";
                subreddits_input.classList.add("lab_input");
            }
        </script>
    </head>
    <body onload="onload">
        <form enctype='multipart/form-data' method="POST" action="{% url 'edit_profile' %}">
            {% csrf_token %}
            <div class="container container_profile">

                <div class="row">
                    <div class="col-2"></div>

                    <div class="col">
                        {% if profile.image != '' %}
                            <a href="{% url 'profile' user.username %}"><img src="/media/{{ profile.image }}" class="label_img" id="profile_pic"></a>
                        {% else %}
                            <a href="{% url 'profile' user.username %}"><img src="{% static '/home/home/icons/profile.png' %}" class="label_img" id="profile_pic"></a>
                        {% endif %}

                        <input type='file' name="image" value='{{ profile_form.image }}' onchange='readURL(this);' />

                    </div>

                     <div class="user">
                         <div class="col">
                            <h5><b>{{ user.username }}</b></h5>
                        </div>
                     </div>
                </div>

            <div class="row" id="line">
                    <div class="col" id="line">
                        <div style="border-left:1140px solid #000;height:3px;border-color: #3EC28F"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-2"></div>
                    <div class="col-6" id="info">
                        <div class="row">
                            <div>
                                <hr>
                            </div>

                            <div class="col">
                               <b> Username:</b>
                            </div>

                            <div class="col">
                                {{ user.username }}
                            </div>
                        </div>

                        <div class="row" id="margin">
                            <div class="col">
                                <b>ORCID:</b>
                            </div>

                            <div class="col">
                                {{ profile_form.orcid }} {{ profile_form.orcid.help_text }}
                            </div>

                        </div>

                        <div class="row" id="margin">
                            <div class="col">
                                <b> Email:</b>
                            </div>

                            <div class="col">
                                {{ user.email }}
                            </div>
                        </div>

                        <div class="row" id="margin">
                            <div class="col">
                                <b>Affiliation:</b>
                            </div>

                            <div class="col">
                                {{ profile_form.affiliation }} {{ profile_form.affiliation.help_text }}
                            </div>
                        </div>

                        <div class="row" id="margin">
                            <div class="col">
                                <b>Research Group:</b>
                            </div>

                            <div class="col">
                                {{ profile_form.research_group }}
                            </div>
                        </div>

                        <div class="row" id="margin">
                            <div class="col">
                               <b> Name:</b>
                            </div>
                            <div class="col">
                                {{ user_form.first_name }} {{ user_form.last_name }}
                            </div>
                        </div>

                        <div class="row" id="margin">
                            <div class="col">
                                <b>Gender:</b>
                            </div>

                            <div class="col">
                                {{ profile_form.gender }}
                            </div>
                        </div>

                        <div class="row" id="margin">
                            <div class="col">
                               <b> Birth Date:</b>
                            </div>
                            <div class="col">
                                {{ profile_form.birth_date }}
                            </div>
                        </div>

                        <div class="row" id="margin">
                            <div class="col">
                              <b>  About Me:</b>
                            </div>
                            <div class="col">
                                {{ profile_form.about_me }}
                            </div>
                        </div>


                        <div class="row" id="margin">
                            <div class="col">
                              <b>Linked in:</b>
                            </div>
                            <div class="col">
                               {{ profile_form.linked_in }}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                {% if not user.profile.tweet_access_token %}
                                    <b>Twitter: </b><a href="{% url 'login_twitter' %}">Login</a>
                                {% else %}
                                   <b>Twitter: </b><a href="{% url 'reset_twitter' %}">Logout</a>
                                {% endif %}
                            </div>
                        </div>
                        <div class="row" id="margin">
                            <div class="col">
                                    {% if not user.profile.reddit_token %}
                                        <b>Reddit: </b><a href="/reddit_auth">Login</a>
                                    {% else %}
                                       <b>Reddit: </b><a href="/reset_reddit">Logout</a>
                                    {% endif %}
                            </div>
                        </div>

                        <div class="row" id="margin">
                            <div class="col">
                                <b>Reasearch Interests: </b>
                            </div>
                            <div class="col">
                                {{ profile_form.interests }}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                               <b>SubReddits: </b>
                            </div>
                            <div class="col">
                                {{ profile_form.subreddits }}
                            </div>
                        </div>


                        <div class="row" id="margin">
                            <div class="col col-margin">
                                <b>Tweet Ammount:</b>
                            </div>
                            <div class="col">
                                 {{ profile_form.tweet_ammount }} {{ profile_form.tweet_ammount.help_text }}
                            </div>
                        </div>

                        <div class="row">
                            <div class="col col-margin">
                                <b>Show Tweets in home page:</b> {{ profile_form.show_twitter }}
                                <p>
                                <b>Show Reddit posts in home page:</b> {{ profile_form.show_reddit }}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col col-margin">
                                <button type="submit" value="submit" class="lab-btn">Save</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        {% endblock %}
    </body>
</html>